From acc97cf479f3cf09204e60e4c6d338b72e64514c Mon Sep 17 00:00:00 2001
From: Moritz Florian Blei <moritz_florian.blei@mailbox.tu-dresden.de>
Date: Wed, 1 Jul 2020 12:51:06 +0200
Subject: [PATCH] Backend fixes for #43

---
 backend/Pipfile               | 1 +
 backend/aergia.py             | 1 +
 backend/config.py             | 3 +--
 backend/importing/__init__.py | 5 +++--
 4 files changed, 6 insertions(+), 4 deletions(-)

diff --git a/backend/Pipfile b/backend/Pipfile
index 03c51c7..f53f064 100644
--- a/backend/Pipfile
+++ b/backend/Pipfile
@@ -22,6 +22,7 @@ marshmallow-sqlalchemy = "*"
 flask-swagger-ui = "*"
 pillow = "*"
 requests = "*"
+dataclasses = "*"
 
 [dev-packages]
 pylint = "*"
diff --git a/backend/aergia.py b/backend/aergia.py
index 6c5bfb7..eb4b544 100644
--- a/backend/aergia.py
+++ b/backend/aergia.py
@@ -11,6 +11,7 @@ guard.init_app(app, User)
 
 def create_dummy_users():
     app.logger.info('Creating dummy users')
+    User.query.delete()
     admin = User(
         username='ernst_haft',
         password=guard.hash_password('adminadmin'),
diff --git a/backend/config.py b/backend/config.py
index 4f27752..2fe7568 100644
--- a/backend/config.py
+++ b/backend/config.py
@@ -8,7 +8,6 @@ from flask_cors import CORS
 from flask_swagger_ui import get_swaggerui_blueprint
 from flask_marshmallow import Marshmallow
 
-
 @dataclass
 class ALConfig:
     SAMPLING: str
@@ -95,4 +94,4 @@ ma = Marshmallow(app)
 guard = Praetorian()
 
 # Configure Cross Origin Resource Sharing (CORS), making cross-origin AJAX possible
-cors = CORS(app, resources={r"/api/*": {"origins": "*"}})
+cors = CORS(app, resources={r"/api/*": {"origins": "*"}, r"/login": {"origins": "*"}})
diff --git a/backend/importing/__init__.py b/backend/importing/__init__.py
index b984f9c..af79a7a 100644
--- a/backend/importing/__init__.py
+++ b/backend/importing/__init__.py
@@ -9,7 +9,8 @@ DATA_PATH = (Path(__file__).absolute() / '../../data').resolve()
 
 
 def import_test_datasets():
-    import_cifar(DATA_PATH)
-    import_dwtc(DATA_PATH)
+	#pass
+    #import_cifar(DATA_PATH)
+    #import_dwtc(DATA_PATH)
     import_religions_texts(DATA_PATH)
 
-- 
2.17.1

